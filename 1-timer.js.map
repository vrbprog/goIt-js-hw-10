{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/themes/material_blue.css\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet  deadLine = null;\n\n  iziToast.settings({\n      timeout: 3000, // default timeout\n      resetOnHover: true,\n      // icon: 'fa fa-user', // icon class\n      transitionIn: 'flipInX',\n      transitionOut: 'flipOutX',\n      position: 'topCenter'\n});\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    deadLine = selectedDates[0];\n    validateSelectDate(selectedDates[0]);\n  },\n};\n\nflatpickr(\"input#datetime-picker\", options);\n\nconst startButton = document.querySelector(\"button[data-start]\");\nconst selectDate = document.querySelector(\"input#datetime-picker\");\n\nfunction validateSelectDate(date) {\n  if (date.getTime() < Date.now()) {\n    iziToast.error({ title: 'Error', message: 'Please choose a date in the future' });\n    startButton.disabled = true;\n  }\n  else {\n    startButton.disabled = false;\n  }\n}\n\nconst timerWidget = {};\ntimerWidget.days = document.querySelector(\".value[data-days]\");\ntimerWidget.hours = document.querySelector(\".value[data-hours]\");\ntimerWidget.minutes = document.querySelector(\".value[data-minutes]\");\ntimerWidget.seconds = document.querySelector(\".value[data-seconds]\");\n\nstartButton.disabled = true;\nstartButton.addEventListener('click', () => {\n  const startTime = Date.now();\n  if (deadLine.getTime() > startTime) {\n    selectDate.disabled = true;\n    startButton.disabled = true;\n    let counter = deadLine.getTime() - startTime;\n    updateTimerValues(timerWidget, counter);\n      const timeInterval = setInterval(() => {\n        counter -= 1000;\n        if (counter <= 0) {\n          clearInterval(timeInterval);\n          selectDate.disabled = false;\n          iziToast.success({ position: \"center\", title: 'Finished', message: 'Event happened' });\n        } \n        updateTimerValues(timerWidget, counter);\n      }, 1000);\n  } else {\n    iziToast.info({ position: \"center\", title: 'Passed', message: 'The event has passed' });\n    startButton.disabled = true;\n  }\n});\n\nfunction updateTimerValues(timerWidget, counter)\n{\n  const { days, hours, minutes, seconds } = timerWidget;\n\n    const remainingTime = convertMs(counter > 0 ? counter : 0);\n    seconds.textContent = addLeadingZero(remainingTime.seconds);\n    minutes.textContent = addLeadingZero(remainingTime.minutes);\n    hours.textContent = addLeadingZero(remainingTime.hours);\n    days.textContent = addLeadingZero(remainingTime.days);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  if (value > 9) return value;\n  return value.toString().padStart(2, '0');\n}\n\n\n"],"names":["deadLine","iziToast","options","selectedDates","validateSelectDate","flatpickr","startButton","selectDate","date","timerWidget","startTime","counter","updateTimerValues","timeInterval","days","hours","minutes","seconds","remainingTime","convertMs","addLeadingZero","ms","value"],"mappings":"+IAOA,IAAKA,EAAW,KAEdC,EAAS,SAAS,CACd,QAAS,IACT,aAAc,GAEd,aAAc,UACd,cAAe,WACf,SAAU,WAChB,CAAC,EAED,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAWG,EAAc,CAAC,EAC1BC,EAAmBD,EAAc,CAAC,CAAC,CACpC,CACH,EAEAE,EAAU,wBAAyBH,CAAO,EAE1C,MAAMI,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAa,SAAS,cAAc,uBAAuB,EAEjE,SAASH,EAAmBI,EAAM,CAC5BA,EAAK,QAAO,EAAK,KAAK,IAAG,GAC3BP,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,oCAAoC,CAAE,EAChFK,EAAY,SAAW,IAGvBA,EAAY,SAAW,EAE3B,CAEA,MAAMG,EAAc,CAAA,EACpBA,EAAY,KAAO,SAAS,cAAc,mBAAmB,EAC7DA,EAAY,MAAQ,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,QAAU,SAAS,cAAc,sBAAsB,EACnEA,EAAY,QAAU,SAAS,cAAc,sBAAsB,EAEnEH,EAAY,SAAW,GACvBA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,MAAMI,EAAY,KAAK,MACvB,GAAIV,EAAS,QAAS,EAAGU,EAAW,CAClCH,EAAW,SAAW,GACtBD,EAAY,SAAW,GACvB,IAAIK,EAAUX,EAAS,QAAO,EAAKU,EACnCE,EAAkBH,EAAaE,CAAO,EACpC,MAAME,EAAe,YAAY,IAAM,CACrCF,GAAW,IACPA,GAAW,IACb,cAAcE,CAAY,EAC1BN,EAAW,SAAW,GACtBN,EAAS,QAAQ,CAAE,SAAU,SAAU,MAAO,WAAY,QAAS,gBAAgB,CAAE,GAEvFW,EAAkBH,EAAaE,CAAO,CACvC,EAAE,GAAI,CACb,MACIV,EAAS,KAAK,CAAE,SAAU,SAAU,MAAO,SAAU,QAAS,sBAAsB,CAAE,EACtFK,EAAY,SAAW,EAE3B,CAAC,EAED,SAASM,EAAkBH,EAAaE,EACxC,CACE,KAAM,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKR,EAElCS,EAAgBC,EAAUR,EAAU,EAAIA,EAAU,CAAC,EACzDM,EAAQ,YAAcG,EAAeF,EAAc,OAAO,EAC1DF,EAAQ,YAAcI,EAAeF,EAAc,OAAO,EAC1DH,EAAM,YAAcK,EAAeF,EAAc,KAAK,EACtDJ,EAAK,YAAcM,EAAeF,EAAc,IAAI,CACxD,CAEA,SAASC,EAAUE,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASG,EAAeE,EAAO,CAC7B,OAAIA,EAAQ,EAAUA,EACfA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}